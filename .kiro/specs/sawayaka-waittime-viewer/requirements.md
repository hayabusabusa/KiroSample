# Requirements Specification

## Overview
静岡県のファミレスチェーン「さわやか」の各店舗の待ち時間をリアルタイムで確認できるiOSアプリケーション。ユーザーが店舗選択や混雑状況の把握を効率的に行えるよう、直感的なインターフェースと正確な待ち時間情報を提供する。iOS17.0以降をサポートし、SwiftUIとSwift Concurrencyを活用したモダンな実装とする。

## Requirements

### Requirement 1: 店舗一覧表示
**User Story:** ユーザーとして、静岡県内のさわやか全店舗の一覧を確認したい。そうすることで、どの店舗が利用可能かを把握できる。

#### Acceptance Criteria
1. WHEN アプリを起動した時 THEN 静岡県内のさわやか全店舗がリスト形式で表示される
2. WHEN 店舗一覧が表示される時 THEN 各店舗の店舗名、住所、現在の待ち時間が表示される
3. WHEN 店舗データの取得に失敗した時 THEN エラーメッセージが表示され、再試行ボタンが提供される
4. WHEN ネットワーク接続がない時 THEN オフライン状態を示すメッセージが表示される

### Requirement 2: リアルタイム待ち時間表示
**User Story:** ユーザーとして、各店舗の現在の待ち時間をリアルタイムで確認したい。そうすることで、最適なタイミングで来店できる。

#### Acceptance Criteria
1. WHEN 店舗一覧を表示している時 THEN 各店舗の待ち時間が「〇分待ち」形式で表示される
2. WHEN 待ち時間が30分以下の時 THEN 緑色で表示される
3. WHEN 待ち時間が31-60分の時 THEN 黄色で表示される
4. WHEN 待ち時間が61分以上の時 THEN 赤色で表示される
5. WHEN 店舗が営業時間外の時 THEN 「営業時間外」と表示される
6. WHEN データが更新できない時 THEN 最後に更新された時刻と「データ更新失敗」を表示する

### Requirement 3: 店舗詳細情報表示
**User Story:** ユーザーとして、特定の店舗の詳細情報を確認したい。そうすることで、来店前に必要な情報を得られる。

#### Acceptance Criteria
1. WHEN 店舗一覧で店舗をタップした時 THEN 店舗詳細画面に遷移する
2. WHEN 店舗詳細画面が表示される時 THEN 店舗名、住所、電話番号、営業時間、現在の待ち時間が表示される
3. WHEN 店舗詳細画面が表示される時 THEN 地図上での店舗位置が表示される
4. WHEN 電話番号をタップした時 THEN 電話アプリが起動する
5. WHEN 住所をタップした時 THEN マップアプリが起動して店舗位置が表示される

### Requirement 4: 手動データ更新
**User Story:** ユーザーとして、プルトゥリフレッシュで待ち時間情報を手動更新したい。そうすることで、必要な時に最新の情報を確認できる。

#### Acceptance Criteria
1. WHEN プルトゥリフレッシュを実行した時 THEN 待ち時間データが更新される
2. WHEN データ更新が完了した時 THEN 最終更新時刻が表示される
3. WHEN データ更新中の時 THEN ローディングインジケーターが表示される
4. WHEN アプリがバックグラウンドから復帰した時 THEN 前回のデータが表示される

### Requirement 5: 店舗検索・フィルタリング
**User Story:** ユーザーとして、特定の条件で店舗を絞り込みたい。そうすることで、希望に合う店舗を素早く見つけられる。

#### Acceptance Criteria
1. WHEN 検索バーに店舗名を入力した時 THEN 該当する店舗のみが表示される
2. WHEN 「待ち時間30分以下」フィルターを選択した時 THEN 待ち時間30分以下の店舗のみが表示される
3. WHEN 「営業中のみ」フィルターを選択した時 THEN 現在営業中の店舗のみが表示される
4. WHEN 地域フィルターを選択した時 THEN 選択した地域の店舗のみが表示される
5. WHEN フィルターをクリアした時 THEN 全店舗が表示状態に戻る

